var h=Object.create;var f=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty;var _=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var N=(e,r,s,a)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of C(r))!T.call(e,t)&&t!==s&&f(e,t,{get:()=>r[t],enumerable:!(a=A(r,t))||a.enumerable});return e};var b=(e,r,s)=>(s=e!=null?h(S(e)):{},N(r||!e||!e.__esModule?f(s,"default",{value:e,enumerable:!0}):s,e));var d=_((O,l)=>{(function(){"use strict";var e={}.hasOwnProperty;function r(){for(var t="",o=0;o<arguments.length;o++){var n=arguments[o];n&&(t=a(t,s(n)))}return t}function s(t){if(typeof t=="string"||typeof t=="number")return t;if(typeof t!="object")return"";if(Array.isArray(t))return r.apply(null,t);if(t.toString!==Object.prototype.toString&&!t.toString.toString().includes("[native code]"))return t.toString();var o="";for(var n in t)e.call(t,n)&&t[n]&&(o=a(o,n));return o}function a(t,o){return o?t?t+" "+o:t+o:t}typeof l<"u"&&l.exports?(r.default=r,l.exports=r):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return r}):window.classNames=r})()});var w=({message:e})=>React.createElement(React.Fragment,null,React.createElement("div",{className:"flex rounded-md border border-dashed border-red-700 bg-red-100 p-2"},React.createElement("svg",{className:"h-6 w-6 flex-none text-red-700",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},React.createElement("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})),React.createElement("div",{className:"font-inter px-2 text-sm font-medium text-red-700"},e))),v=w;var g=async e=>{await e.importJS("https://cdnjs.cloudflare.com/ajax/libs/react/18.3.1/umd/react.production.min.js"),await e.importJS("https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.3.1/umd/react-dom.production.min.js")};var j=(e,r)=>{let[s,a]=React.useState(r),t=o=>n=>{a(i=>({...i,[o]:n})),console.log("Pushing ${attrName} to server",n),e.pushEvent(`update_${o}`,n)};return React.useEffect(()=>{e.handleEvent("update",o=>{console.log("Attribute update from server",o),a(n=>({...Object.assign(n,o)}))})},[]),[s,t]},y=j;var p=b(d()),k=({name:e,label:r,defaultValue:s,testId:a,onChange:t,orientation:o="vert"})=>React.createElement("div",{className:(0,p.default)({"flex flex-row items-baseline":o=="horiz"})},React.createElement("label",{htmlFor:e,className:(0,p.default)({block:o=="vert","pr-1 uppercase":o=="horiz"},"mb-1 text-sm font-medium")},r),React.createElement("input",{type:"text","data-testid":a??e,value:s,name:e,onChange:n=>t(n.target.value),className:(0,p.default)({"block w-full":o=="vert"},"rounded-lg border border-gray-300 bg-gray-50 p-1.5 text-sm focus:border-blue-500 focus:ring-blue-500")})),c=k;var u=b(d()),P=({name:e,label:r,options:s,selectedOption:a,onChange:t,className:o="",orientation:n="vert"})=>React.createElement("div",{className:(0,u.default)({"flex flex-row items-baseline":n=="horiz"},o)},React.createElement("label",{htmlFor:e,className:(0,u.default)({block:n=="vert","pr-1 uppercase":n=="horiz"},"mb-1 text-sm font-medium")},r),React.createElement("select",{id:e,value:a||void 0,onChange:i=>t(i.target.value),className:(0,u.default)({"block w-full":n=="vert"}," bg-caret-down appearance-none rounded-lg border border-gray-300 bg-gray-50 bg-[length:10px] bg-[center_right_10px] bg-no-repeat p-2 pr-5 text-sm focus:border-blue-500 focus:ring-blue-500")},s.map(i=>React.createElement("option",{key:i.value,value:i.value},i.label)))),m=P;var z=({initialAttrs:e,ctx:r})=>{let[s,a]=y(r,e),t=[{label:"File",value:"file"},{label:"Environment Variable",value:"env"}];return t.push({label:"K8s Service Account",value:"k8s"}),React.createElement("div",{className:"rounded-md border border-solid border-gray-300 font-inter font-medium text-gray-600"},React.createElement("div",{className:"border-b-solid flex flex-wrap gap-x-5 gap-y-3 border-b border-b-gray-300 bg-blue-100 p-3"},React.createElement(m,{name:"source_type",label:"Source Type",options:t,selectedOption:s.source_type,onChange:a("source_type"),orientation:"horiz"}),React.createElement(c,{label:"Assign To",name:"assign_to",defaultValue:s.result_variable,onChange:a("result_variable"),orientation:"horiz"})),React.createElement("div",{className:"flex flex-wrap gap-x-5 p-3"},s.source_type!="k8s"&&React.createElement(c,{label:s.source_type=="file"?"File Path":"Env Var",name:"source",defaultValue:s.source,onChange:a("source"),orientation:"vert"}),s.source_type!="k8s"&&React.createElement(c,{label:"Context",name:"context",defaultValue:s.opts.context||"",onChange:o=>a("opts")({...s.opts,context:o})}),React.createElement(m,{name:"insecure_skip_tls_verify",label:"Insecure Skip TLS Verify",options:[{label:"Yes",value:"true"},{label:"No",value:"false"}],selectedOption:s.opts.insecure_skip_tls_verify.toString(),onChange:o=>a("opts")({...s.opts,insecure_skip_tls_verify:JSON.parse(o)})})))},x=z;var $=async(e,r)=>{await g(e),e.root.innerHTML="loading...",e.importCSS("main.css"),e.importCSS("https://fonts.googleapis.com/css2?family=Inter:wght@400;500&display=swap");let s=ReactDOM.createRoot(e.root);if(r.error)return s.render(React.createElement(v,{message:r.error}));s.render(React.createElement(x,{initialAttrs:r,ctx:e}))};export{$ as init};
/*! Bundled license information:

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)
*/
